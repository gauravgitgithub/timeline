{% extends 'core/base.html' %}
{% load humanize %}
{% block content %}
<div class="container">
    <div class="columns">
        <div class="column is-12">
            <h1 class="title">{{ user.username  }}</h1>
            <div class="follows-block">
                {% if user.userprofile.avatar %}
                <figure class="image is-128x128">
                    <img class="is-rounded"  src="{{ user.userprofile.avatar.url }}" alt="{{ user.userprofile.username }}"
                        title="{{ user.userprofile.username }}" />
                </figure>
                {% endif %}
                <p class="followers"><a href="{% url 'followers' user.username %}">Followers : {{  user.userprofile.followed_by.count }}</a></p>
                <p class="following"><a href="{% url 'follows' user.username %}">Follows : {{  user.userprofile.follows.count }}</a></p>
            </div>
            {% if user != request.user %}
                {% if request.user.userprofile in user.userprofile.followed_by.all %}
                    <a href="{% url 'unfollow_user' user.username %}" class="button is-warning">Unfollow &nbsp; <i class="fas fa-thumbs-down"></i></a>
                {% else %}
                    <a href="{% url 'follow_user' user.username %}" class="button is-primary">Follow &nbsp; <i class="fas fa-thumbs-up"></i></a>
                {% endif %}
            {% endif %}
        </div>
    </div>
    <div class="columns">
        <div class="column is-8">
            <div class="wrapper-feeds">
                {% for post in user.posts.all %}
                <div class="feed">
                    <article class="media">
                        <figure class="media-left">
                            <p class="image is-64x64">
                                {% if user.userprofile.avatar %}
                                    <img class="is-rounded" src="{{ user.userprofile.avatar.url }}" alt="{{ user.userprofile.username }}"
                                        title="{{ user.userprofile.username }}" />
                                {% endif %}
                            </p>

                        </figure>
                        <div class="media-content">
                            <div class="content">
                                    <p>
                                        <strong>{{ post.created_by.username }}</strong>
                                        {{  post.created_at|naturaltime }}
                                        <br/>
                                        {{ post.body }}
                                    </p>
                            </div>
                        </div>
                    </article>        
                </div>
                {% endfor %}
            
            </div>
        </div>
    </div>
{% endblock %}